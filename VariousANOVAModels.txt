DATA RANDOM;
INPUT ROW COLUMN Y;
CARDS;
1 1 10
1 1 11
1 1 12
1 2 12
1 2 12
1 2 13
1 3 14
1 3 15
1 3 15
2 1 15
2 1 16
2 1 17
2 2 18
2 2 18
2 2 17
2 3 15
2 3 15
2 3 16
3 1 18
3 1 19
3 2 20
3 2 21
3 3 16
3 3 17
;

*** FIXED EFFECTS MODEL ***;
PROC GLM DATA=RANDOM;
CLASS ROW COLUMN;
MODEL Y=ROW COLUMN ROW*COLUMN / SS3;
lsmeans row column row*column / ss3 ; /*if you do not want all possible comparisons do not use tukeys(?). tukey gives all possible comparisons*/
lsmeans row*column / stderr pdiff;
*** RANDOM EFFECTS MODEL ***;
PROC GLM DATA=RANDOM;
CLASS ROW COLUMN;
MODEL Y=ROW COLUMN ROW*COLUMN / SS3;
RANDOM ROW COLUMN ROW*COLUMN / TEST;
TEST H=ROW COLUMN E=ROW*COLUMN; *tells sas to contrust a proper f test
*** MIXED MODEL ***;
PROC GLM DATA=RANDOM;
CLASS ROW COLUMN;
MODEL Y=ROW COLUMN ROW*COLUMN / SS3;
RANDOM ROW ROW*COLUMN / TEST;
TEST H=COLUMN E=ROW*COLUMN; /*use row*col as denominator*/
/*proc varcomp*/
PROC MIXED DATA=RANDOM;
CLASS ROW COLUMN;
MODEL Y=COLUMN;
RANDOM ROW ROW*COLUMN;
RUN;